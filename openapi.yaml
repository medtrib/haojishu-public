# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: Auth API
    description: 权限认证服务
    version: 0.0.1
paths:
    /auth/v1/AddRole:
        post:
            tags:
                - Auth
            description: 添加角色
            operationId: Auth_AddRole
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/api.auth.v1.AddRoleReq'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.AddRoleRep'
    /auth/v1/AddRolesForUser:
        get:
            tags:
                - Auth
            description: 给用户设置角色
            operationId: Auth_AddRolesForUser
            parameters:
                - name: username
                  in: query
                  description: 用户名
                  schema:
                    type: string
                - name: roles
                  in: query
                  description: 角色数组
                  schema:
                    type: array
                    items:
                        type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
    /auth/v1/DelRole:
        delete:
            tags:
                - Auth
            description: 删除角色
            operationId: Auth_DelRole
            parameters:
                - name: roleId
                  in: query
                  schema:
                    type: integer
                    format: uint64
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
    /auth/v1/DeleteRoleForUser:
        delete:
            tags:
                - Auth
            description: 删除单个用户角色(如果需要删除单个用户的某个角色用这个)
            operationId: Auth_DeleteRoleForUser
            parameters:
                - name: username
                  in: query
                  description: 用户名
                  schema:
                    type: string
                - name: role
                  in: query
                  description: 角色名
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
    /auth/v1/DeleteRolesForUser:
        delete:
            tags:
                - Auth
            description: 删除多个用户角色(删除传递用户的所有角色)
            operationId: Auth_DeleteRolesForUser
            parameters:
                - name: username
                  in: query
                  description: 用户名
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
    /auth/v1/EditRole:
        put:
            tags:
                - Auth
            description: 编辑角色
            operationId: Auth_EditRole
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/api.auth.v1.EditRoleReq'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
    /auth/v1/FullRoleList:
        get:
            tags:
                - Auth
            description: 获取角色列表(完整)
            operationId: Auth_FullRoleList
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.FullRoleListRep'
    /auth/v1/GetRolePolicies:
        get:
            tags:
                - Auth
            description: 获取角色有那些权限
            operationId: Auth_GetRolePolicies
            parameters:
                - name: role
                  in: query
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.GetRolePoliciesRep'
    /auth/v1/GetRolesForUser:
        get:
            tags:
                - Auth
            description: 获取用户角色
            operationId: Auth_GetRolesForUser
            parameters:
                - name: username
                  in: query
                  description: 用户名
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.GetRolesForUserRep'
    /auth/v1/GetUsersForRole:
        get:
            tags:
                - Auth
            description: 获取角色有那些用户
            operationId: Auth_GetUsersForRole
            parameters:
                - name: role
                  in: query
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.GetUsersForRoleRep'
    /auth/v1/PageRoleList:
        get:
            tags:
                - Auth
            description: 获取角色列表(分页)
            operationId: Auth_PageRoleList
            parameters:
                - name: page
                  in: query
                  schema:
                    type: integer
                    format: uint64
                - name: pageSize
                  in: query
                  schema:
                    type: integer
                    format: uint64
                - name: roleName
                  in: query
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.PageRoleListRep'
    /auth/v1/SetRolePolicies:
        post:
            tags:
                - Auth
            description: 设置角色权限
            operationId: Auth_SetRolePolicies
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/api.auth.v1.SetRolePoliciesReq'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/api.auth.v1.RoleStatus'
components:
    schemas:
        api.auth.v1.AddRoleRep:
            type: object
            properties:
                roleId:
                    type: integer
                    description: 角色Id
                    format: uint64
                roleName:
                    type: string
                    description: 角色名称
            description: 添加角色回复
        api.auth.v1.AddRoleReq:
            type: object
            properties:
                name:
                    type: string
                    description: 名称
            description: 添加角色
        api.auth.v1.EditRoleReq:
            type: object
            properties:
                roleId:
                    type: integer
                    description: 角色Id
                    format: uint64
                roleName:
                    type: string
                    description: 角色名称
            description: 编辑角色
        api.auth.v1.FullRoleListRep:
            type: object
            properties:
                list:
                    type: array
                    items:
                        $ref: '#/components/schemas/api.auth.v1.Role'
            description: 完整角色列表回复
        api.auth.v1.GetRolePoliciesRep:
            type: object
            properties:
                policyRules:
                    type: array
                    items:
                        $ref: '#/components/schemas/api.auth.v1.PolicyRules'
            description: 获取角色有那些权限 回复
        api.auth.v1.GetRolesForUserRep:
            type: object
            properties:
                roles:
                    type: array
                    items:
                        type: string
                    description: 角色列表
            description: 获取用户角色回复
        api.auth.v1.GetUsersForRoleRep:
            type: object
            properties:
                users:
                    type: array
                    items:
                        type: string
                    description: 用户列表
            description: 获取角色有那些用户 回复
        api.auth.v1.PageRoleListRep:
            type: object
            properties:
                total:
                    type: integer
                    format: uint64
                list:
                    type: array
                    items:
                        $ref: '#/components/schemas/api.auth.v1.Role'
            description: 分页角色列表
        api.auth.v1.PolicyRules:
            type: object
            properties:
                path:
                    type: string
                method:
                    type: string
        api.auth.v1.Role:
            type: object
            properties:
                roleId:
                    type: integer
                    description: 角色Id
                    format: uint64
                name:
                    type: string
                    description: 角色名称
                createdAt:
                    type: string
                    description: 创建时间
                updatedAt:
                    type: string
                    description: 更新时间
            description: 角色
        api.auth.v1.RoleStatus:
            type: object
            properties:
                success:
                    type: boolean
            description: 角色状态回复
        api.auth.v1.SetRolePoliciesReq:
            type: object
            properties:
                role:
                    type: string
                    description: 角色名
                policyRules:
                    type: array
                    items:
                        $ref: '#/components/schemas/api.auth.v1.PolicyRules'
                    description: 权限
            description: 设置角色权限
tags:
    - name: Auth
